!function(){"use strict";var e=angular.module("dashboard-app");e.directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(e,t,s,o){function a(){var e=t.html();e=e.replace(/&nbsp;/g,"Â "),o.$setViewValue(e)}o.$render=function(){t.html(o.$viewValue||"")},t.bind("keyup change",function(){e.$apply(a)}),t.bind("blur",function(){var t=o.$viewValue.trim();t&&"<br>"!==t&&"<BR>"!==t||(t=s.defaultvalue,o.$setViewValue(t),o.$render()),e.$apply(a)}),t.bind("keydown keypress",function(e){var a=o.$viewValue.trim();a===s.defaultvalue&&(o.$setViewValue(""),o.$render());var n="undefined"==typeof e.which?e.keyCode:e.which;13===n&&(t.blur(),e.preventDefault())}),$(t).focusout(function(){var e=$(this);e.text().replace(" ","").length||e.empty()})}}})}(),function(){angular.module("dashboard-app",["ngCookies","ngStorage","ngAnimate","ngAudio","angularScreenfull","ui.bootstrap.datetimepicker","as.sortable","ui.checkbox"])}(),function(){"use strict";function e(e,t,s,o,a){var n=this;n.dashboard=t.dashboard,n.settings=t.settings,n.isBusy=!0,n.errorMessage="",n.refreshTime=18e5,n.settings||(n.settings={},n.settings.defaultName="Young Grasshopper",n.settings.name=n.settings.defaultName,n.settings.defaultQuestion="What is your goal for today?",n.settings.question=n.settings.defaultQuestion,n.settings.location="",n.settings.showBackgroundPhoto=!0,n.settings.showFocus=!0,n.settings.showWeather=!0,n.settings.temperatureUnits="",n.settings.showQuote=!0,n.settings.showGreeting=!0,n.settings.showTodo=!1,n.settings.showTimers=!0,n.settings.clockFormat="12-hour",n.settings.activeTimer="clock",n.settings.volumeOn=!0,n.settings.timerMinutesSelection=5,n.settings.timerSecondsSelection=0,n.settings.pomodoroTime=25,n.settings.pomodoroShortBreak=5,n.settings.pomodoroLongBreak=15,n.settings.pomodoroTaskPlaceholder="What task are you working on?",n.settings.pomodoroTaskDescription=n.settings.pomodoroTaskPlaceholder,n.settings.pomodoroTotal=0,n.settings.countdown={eventPlaceholder:"Event Name...",eventDescription:"Event Name...",endDate:new Date,started:!1},n.settings.todo={category:0,categories:["Work","Personal","Make a difference"],todos:[]}),n.stopwatchReset={},n.showTimer=function(e){"stopwatch"!==e&&n.stopwatchReset(),n.settings.activeTimer=e,n.settings.showTimers=!0,$(".ssm-overlay").click()},e.$watch("[vm.settings]",function(){n.saveSettings()},!0),n.saveDashboard=function(){var e=new Date;e.setTime(e.getTime()+n.refreshTime),t.expireDate=e,t.dashboard=n.dashboard},n.saveSettings=function(){t.settings=n.settings},n.getNextElementIndex=function(e,t){return t+=1,t>=e.length&&(t=0),t},n.getDashboard=function(){n.isBusy=!0;var e=(new Date).getTimezoneOffset(),t=Date.now()-60*e*1e3;s.get("/api/dashboard/"+t).then(function(e){n.dashboard=e.data,n.dashboard.quoteIndex=n.getNextElementIndex(n.dashboard.quotes,0),n.dashboard.quote=n.dashboard.quotes[n.dashboard.quoteIndex],n.dashboard.photoIndex=n.getNextElementIndex(n.dashboard.photos,0),n.dashboard.photo=n.dashboard.photos[n.dashboard.photoIndex];for(var t=0;t<n.dashboard.photos.length;t++){var s=n.dashboard.photos[t].name;n.dashboard.photos[t].shortName=s,s.length>20&&(n.dashboard.photos[t].shortName=s.replace(/^(.{20}[^\s]*).*/,"$1"),n.dashboard.photos[t].shortName.length<s.length+3&&(n.dashboard.photos[t].shortName=n.dashboard.photos[t].shortName+"..."))}n.dashboard.weather&&(n.settings.location||(n.settings.location=n.dashboard.weather.location),n.settings.temperatureUnits||(n.settings.temperatureUnits="celsius",n.dashboard.weather.usesFahrenheit&&(n.settings.temperatureUnits="fahrenheit"))),n.saveDashboard()},function(e){n.errorMessage="Failed to load data: "+e})["finally"](function(){n.isBusy=!1})},o(n.getDashboard,n.refreshTime),n.refresh=function(){!n.dashboard||n.expireDate<new Date?n.getDashboard():(n.dashboard.quoteIndex=n.getNextElementIndex(n.dashboard.quotes,n.dashboard.quoteIndex),n.dashboard.quote=n.dashboard.quotes[n.dashboard.quoteIndex],n.dashboard.photoIndex=n.getNextElementIndex(n.dashboard.photos,n.dashboard.photoIndex),n.dashboard.photo=n.dashboard.photos[n.dashboard.photoIndex],n.saveDashboard(),n.isBusy=!1)},n.refresh(),n.startFade=!1,n.fadeAndRefresh=function(){n.startFade=!0,a(function(){n.startFade=!1,n.refresh()},1e3)}}angular.module("dashboard-app").controller("dashboardController",e)}(),function(e,t,s,o,a,n,r){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,n=t.createElement(s),r=t.getElementsByTagName(s)[0],n.async=1,n.src=o,r.parentNode.insertBefore(n,r)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-2979304-2","auto"),ga("send","pageview");