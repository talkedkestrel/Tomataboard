!function(){"use strict";var t=angular.module("dashboard-app");t.directive("clock",function(t,e){return{restrict:"E",replace:"true",templateUrl:"/views/clock.html",scope:{format:"=format"},link:function(e,o,r){var n=function(){"12-hour"===e.format?e.timeFormat="h:mm":"24-hour"===e.format&&(e.timeFormat="HH:mm")};n(),o.bind("click",function(){"12-hour"===e.format?e.format="24-hour":"24-hour"===e.format&&(e.format="12-hour"),n(),e.$apply()});var a=function(){e.time=Date.now()};a();var s=t(a,6e4);o.on("$destroy",function(){t.cancel(s)})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(t,e,o,r){function n(){var t=e.html();t=t.replace(/&nbsp;/g,"Â "),r.$setViewValue(t)}r.$render=function(){e.html(r.$viewValue||"")},e.bind("keyup change",function(){t.$apply(n)}),e.bind("blur",function(){var e=r.$viewValue.trim();e&&"<br>"!==e&&"<BR>"!==e||(e=o.defaultvalue,r.$setViewValue(e),r.$render()),t.$apply(n)}),e.bind("keydown keypress",function(t){var n=r.$viewValue.trim();n===o.defaultvalue&&(r.$setViewValue(""),r.$render());var a="undefined"==typeof t.which?t.keyCode:t.which;13===a&&(e.blur(),t.preventDefault())}),$(e).focusout(function(){var t=$(this);t.text().replace(" ","").length||t.empty()})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("countdown",function(t,e){return{restrict:"E",replace:"true",templateUrl:"/views/countdown.html",scope:{eventDescription:"=",eventPlaceholder:"=",endDate:"="},link:function(e,o,r){e.promise={},e.time={};var n;e.endDate=moment(e.endDate);var a=function(){n=0;var t=new Date;e.endDate>t&&(n=(e.endDate-t)/1e3)},s=function(){var t={days:0,hours:0,minutes:0,seconds:0};if(!e.endDate)return void(e.time=t);var o=moment(e.endDate)-new Date;if(0>o)return void(e.time=t);var r=1e3,n=60*r,a=60*n,s=24*a,i=Math.floor(o/s),u=Math.floor(o%s/a),c=Math.floor(o%a/n),l=Math.floor(o%n/r);e.time={days:i,hours:u,minutes:c,seconds:l}},i=function(){n-=1,0>=n?e.reset():s()};e.start=function(){t.cancel(e.promise),e.promise=0,"PAUSE"===e.startText?e.startText="START":"START"===e.startText&&(a(),n>0&&(e.startText="PAUSE",e.promise=t(i,1e3)))},e.reset=function(){t.cancel(e.promise),e.promise=0,n=0,s(),e.startText="START"},e.reset(),a(),n>0&&e.start();for(var u=o[0].querySelectorAll(".times"),c=0;c<u.length;++c){var l=angular.element(u[c]);l.bind("click",function(){e.start()})}o.on("$destroy",function(){t.cancel(e.promise)})}}})}(),function(){angular.module("dashboard-app",["ngCookies","ngStorage","ngAnimate","ngAudio","angularScreenfull","ui.bootstrap.datetimepicker"])}(),function(){"use strict";function t(t,e,o,r,n){var a=this;a.dashboard=e.dashboard,a.settings=e.settings,a.isBusy=!0,a.errorMessage="",a.refreshTime=18e5,a.settings||(a.settings={},a.settings.defaultName="Young Grasshopper",a.settings.name=a.settings.defaultName,a.settings.defaultQuestion="What is your goal for today?",a.settings.question=a.settings.defaultQuestion,a.settings.location="",a.settings.showBackgroundPhoto=!0,a.settings.showFocus=!0,a.settings.showWeather=!0,a.settings.temperatureUnits="",a.settings.showQuote=!0,a.settings.showGreeting=!0,a.settings.showTimers=!0,a.settings.clockFormat="12-hour",a.settings.activeTimer="clock",a.settings.volumeOn=!0,a.settings.timerMinutesSelection=5,a.settings.timerSecondsSelection=0,a.settings.pomodoroTime=25,a.settings.pomodoroShortBreak=5,a.settings.pomodoroLongBreak=15,a.settings.pomodoroTaskPlaceholder="What task are you working on?",a.settings.pomodoroTaskDescription=a.settings.pomodoroTaskPlaceholder,a.settings.pomodoroTotal=0,a.settings.countdownEventPlaceholder="Event Name...",a.settings.countdownEventDescription=a.settings.countdownEventPlaceholder,a.settings.countdownEndDate={}),a.stopwatchReset={},a.showTimer=function(t){"stopwatch"!==t&&a.stopwatchReset(),a.settings.activeTimer=t,$(".ssm-overlay").click()},t.$watch("[vm.settings]",function(){a.saveSettings()},!0),a.saveDashboard=function(){var t=new Date;t.setTime(t.getTime()+a.refreshTime),e.expireDate=t,e.dashboard=a.dashboard},a.saveSettings=function(){e.settings=a.settings},a.getNextElementIndex=function(t,e){return e+=1,e>=t.length&&(e=0),e},a.getDashboard=function(){a.isBusy=!0;var t=(new Date).getTimezoneOffset(),e=Date.now()-60*t*1e3;o.get("/api/dashboard/"+e).then(function(t){a.dashboard=t.data,a.dashboard.quoteIndex=a.getNextElementIndex(a.dashboard.quotes,0),a.dashboard.quote=a.dashboard.quotes[a.dashboard.quoteIndex],a.dashboard.photoIndex=a.getNextElementIndex(a.dashboard.photos,0),a.dashboard.photo=a.dashboard.photos[a.dashboard.photoIndex];for(var e=0;e<a.dashboard.photos.length;e++){var o=a.dashboard.photos[e].name;a.dashboard.photos[e].shortName=o,o.length>20&&(a.dashboard.photos[e].shortName=o.replace(/^(.{20}[^\s]*).*/,"$1"),a.dashboard.photos[e].shortName.length<o.length+3&&(a.dashboard.photos[e].shortName=a.dashboard.photos[e].shortName+"..."))}a.dashboard.weather&&(a.settings.location||(a.settings.location=a.dashboard.weather.location),a.settings.temperatureUnits||(a.settings.temperatureUnits="celsius",a.dashboard.weather.usesFahrenheit&&(a.settings.temperatureUnits="fahrenheit"))),a.saveDashboard()},function(t){a.errorMessage="Failed to load data: "+t})["finally"](function(){a.isBusy=!1})},r(a.getDashboard,a.refreshTime),a.refresh=function(){!a.dashboard||a.expireDate<new Date?a.getDashboard():(a.dashboard.quoteIndex=a.getNextElementIndex(a.dashboard.quotes,a.dashboard.quoteIndex),a.dashboard.quote=a.dashboard.quotes[a.dashboard.quoteIndex],a.dashboard.photoIndex=a.getNextElementIndex(a.dashboard.photos,a.dashboard.photoIndex),a.dashboard.photo=a.dashboard.photos[a.dashboard.photoIndex],a.saveDashboard(),a.isBusy=!1)},a.refresh(),a.startFade=!1,a.fadeAndRefresh=function(){a.startFade=!0,n(function(){a.startFade=!1,a.refresh()},1e3)}}angular.module("dashboard-app").controller("dashboardController",t)}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("focus",function(){return{restrict:"E",replace:"true",templateUrl:"/views/focus.html",link:function(t,e,o){}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("greeting",function(){return{restrict:"E",replace:"true",templateUrl:"/views/greeting.html",link:function(t,e,o){}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("photo",function(){return{restrict:"E",replace:"true",templateUrl:"/views/photo.html",link:function(t,e,o){$(e).popover({html:"true",placement:"top",trigger:"hover",content:function(){return $("#photo-popover").html()}})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("pomodoro",function(t,e){return{restrict:"E",replace:"true",templateUrl:"/views/pomodoro.html",scope:{pomodoroTime:"=",shortBreak:"=",longBreak:"=",taskDescription:"=",taskPlaceholder:"=",total:"=",volumeOn:"=volumeOn"},link:function(o,r,n){var a=1;o.promise={};var s,i=e.load("/sounds/start.wav");o.startPomodoro=function(){a=1,o.reset(),o.start()},o.startShortBreak=function(){a=2,o.reset(),o.start()},o.startLongBreak=function(){a=3,o.reset(),o.start()};var u=function(){1===a?s=60*o.pomodoroTime:2===a?s=60*o.shortBreak:3===a&&(s=60*o.longBreak)},c=function(){var t=new Date(null);t.setSeconds(s),s>=3600?o.time=t.toISOString().substr(11,8):s>=60?o.time=t.toISOString().substr(14,5):60>s&&(o.time=t.toISOString().substr(17,2))},l=function(){1===a&&(o.total=o.total+1,o.volumeOn&&i.play())},d=function(){s-=1,0>=s?(l(),o.reset()):c()};o.start=function(){t.cancel(o.promise),o.promise=0,"PAUSE"===o.startText?o.startText="START":"START"===o.startText&&s>0&&(o.startText="PAUSE",o.promise=t(d,1e3))},o.reset=function(){t.cancel(o.promise),o.promise=0,u(),c(),o.startText="START"},o.reset();var m=angular.element(r[0].querySelector(".time"));m.bind("click",function(){o.start()}),r.on("$destroy",function(){t.cancel(o.promise)})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("quote",function(){return{restrict:"E",replace:"true",templateUrl:"/views/quote.html",link:function(t,e,o){$(e).popover({html:"true",placement:"top",trigger:"hover",content:function(){return $("#quote-popover").html()}})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("settings",function(){return{restrict:"E",replace:"true",templateUrl:"/views/settings.html",link:function(t,e,o){var r;for(t.workCollection=[],r=10;60>=r;r++)t.workCollection.push(r);for(t.shortBreakCollection=[],r=1;30>=r;r++)t.shortBreakCollection.push(r);for(t.longBreakCollection=[],r=1;30>=r;r++)t.longBreakCollection.push(r);$('.dropdown-menu a[data-toggle="pill"]').click(function(t){t.stopPropagation(),$(this).tab("show")})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("sidebar",function(){return{restrict:"E",replace:"true",templateUrl:"/views/sidebar.html",link:function(t,e,o){$(document).ready(function(){$("nav").slideAndSwipe()})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("stopwatch",function(t){return{restrict:"E",replace:"true",templateUrl:"/views/stopwatch.html",scope:{reset:"="},link:function(e,o,r){e.promise={};var n=0,a=function(){n+=1;var t=new Date(null);t.setSeconds(n),e.time=t.toISOString().substr(11,8)};e.start=function(){t.cancel(e.promise),e.promise=0,"PAUSE"===e.startText?e.startText="START":"START"===e.startText&&(e.startText="PAUSE",e.promise=t(a,1e3))},e.reset=function(){t.cancel(e.promise),e.promise=0,n=0,e.time="00:00:00",e.startText="START"},e.reset();var s=angular.element(o[0].querySelector(".time"));s.bind("click",function(){e.start()}),o.on("$destroy",function(){t.cancel(e.promise)})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("timer",function(t,e){return{restrict:"E",replace:"true",templateUrl:"/views/timer.html",scope:{minutesSelection:"=minutesSelection",secondsSelection:"=secondsSelection",volumeOn:"=volumeOn"},link:function(o,r,n){o.minutesCollection=["mins"];for(var a=0;90>=a;a++)o.minutesCollection.push(a);o.secondsCollection=["secs",0,10,15,20,25,30,35,40,45,50,55,60],o.promise={};var s,i=e.load("/sounds/alarm_beep.wav"),u=function(){s=0,angular.isNumber(o.minutesSelection)&&(s+=60*o.minutesSelection),angular.isNumber(o.secondsSelection)&&(s+=o.secondsSelection)},c=function(){var t=new Date(null);t.setSeconds(s),s>=3600?o.time=t.toISOString().substr(11,8):s>=60?o.time=t.toISOString().substr(14,5):60>s&&(o.time=t.toISOString().substr(17,2))},l=function(){s-=1,0>=s?(o.volumeOn&&i.play(),o.reset()):c()};o.start=function(){t.cancel(o.promise),o.promise=0,"PAUSE"===o.startText?o.startText="START":"START"===o.startText&&s>0&&(o.startText="PAUSE",o.promise=t(l,1e3))},o.reset=function(){t.cancel(o.promise),o.promise=0,u(),c(),o.startText="START"},o.reset();var d=angular.element(r[0].querySelector(".time"));d.bind("click",function(){o.start()}),r.on("$destroy",function(){t.cancel(o.promise)})}}})}(),function(){"use strict";var t=angular.module("dashboard-app");t.directive("weather",function(){return{restrict:"E",replace:"true",templateUrl:"/views/weather.html",link:function(t,e,o){$(e).popover({html:"true",placement:"top",trigger:"hover",content:function(){return $("#weather-popover").html()}})}}})}();